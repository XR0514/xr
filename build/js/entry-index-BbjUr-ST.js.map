{"version":3,"file":"entry-index-BbjUr-ST.js","sources":["../../src/aboutHtml/index/index.js"],"sourcesContent":["\r\nimport \"../../common/common.scss\";\r\nimport \"../../font/iconfont.css\";\r\nimport \"./index.scss\";\r\nimport axios from \"axios\";\r\n\r\n// console.log(132)\r\n\r\n\r\nlet priceType = 0;\r\n\r\nfunction getData(){\r\n    return new Promise((resolve, reject) => {\r\n        const xhr = new XMLHttpRequest();\r\n        xhr.open(\"get\", \"https://zyxcl.xyz/exam_api/zh\");\r\n        xhr.onreadystatechange = () => {\r\n            if (xhr.readyState === 4 && xhr.status === 200) {\r\n                const data = JSON.parse(xhr.responseText);\r\n                resolve(data);\r\n            }\r\n        }\r\n        xhr.send()\r\n    })\r\n}\r\nasync function init() {\r\n    const res = await getData();\r\n    // console.log(res.items);\r\n    renderDataOne(res.items);\r\n    renderDataTwo(res.items);\r\n    clickData();\r\n    sort(res.items)\r\n}\r\ninit()\r\n\r\n// 点击切换排列方式\r\n$(\".change\").addEventListener(\"click\", () => {\r\n    if($(\".items\").classList.contains(\"show\")){\r\n        $(\".items\").classList.remove(\"show\");\r\n        $(\".itemss\").classList.add(\"show\");\r\n        clickData()\r\n    }else if($(\".itemss\").classList.contains(\"show\")){\r\n        $(\".items\").classList.add(\"show\");\r\n        $(\".itemss\").classList.remove(\"show\");\r\n        clickData()\r\n    }   \r\n})\r\n\r\n// 点击每个商品\r\n$(\"section\").addEventListener(\"click\", async e => {\r\n    location.href = \"./details.html\";\r\n    let id = e.target.getAttribute(\"dataId\");\r\n    const res1 = await axios.get(\"https://zyxcl.xyz/exam_api/zh\");\r\n    const res2 = await axios.get(\"https://zyxcl.xyz/exam_api/zh\");\r\n    const res3 = await axios.get(\"https://zyxcl.xyz/exam_api/zh\");\r\n    // console.log(res)\r\n    res1.data.items.forEach(obj => {\r\n        if(id == obj.item_id){\r\n            // console.log(123)\r\n            localStorage.setItem(\"data\", JSON.stringify(obj))\r\n        }\r\n    })\r\n    res2.data.items.forEach(obj => {\r\n        if(id == obj.item_id){\r\n            // console.log(123)\r\n            localStorage.setItem(\"data\", JSON.stringify(obj))\r\n        }\r\n    })\r\n    res3.data.items.forEach(obj => {\r\n        if(id == obj.item_id){\r\n            // console.log(123)\r\n            localStorage.setItem(\"data\", JSON.stringify(obj))\r\n        }\r\n    })\r\n})\r\n\r\n\r\n\r\nfunction clickData(){\r\n    $(\"header\").addEventListener(\"click\", async e => {\r\n        if(e.target.classList.contains(\"all\")){\r\n            $(\".active\").classList.remove(\"active\");\r\n            e.target.classList.add(\"active\");\r\n            const res = await axios.get(\"https://zyxcl.xyz/exam_api/zh\");\r\n            sort(res.data.items);\r\n            renderDataOne(res.data.items);\r\n            renderDataTwo(res.data.items);\r\n        }\r\n        if(e.target.classList.contains(\"sold\")){\r\n            $(\".active\").classList.remove(\"active\");\r\n            e.target.classList.add(\"active\");\r\n            const res = await axios.get(\"https://zyxcl.xyz/exam_api/xl\");\r\n            sort(res.data.items);\r\n            renderDataOne(res.data.items);\r\n            renderDataTwo(res.data.items);\r\n        }\r\n        if(e.target.classList.contains(\"new\")){\r\n            $(\".active\").classList.remove(\"active\");\r\n            e.target.classList.add(\"active\");\r\n            const res = await axios.get(\"https://zyxcl.xyz/exam_api/sx\");\r\n            sort(res.data.items);\r\n            renderDataOne(res.data.items);\r\n            renderDataTwo(res.data.items);\r\n        }\r\n    })\r\n}\r\n\r\n\r\nfunction sort(data){\r\n    let data1 = data;\r\n    let data2 = [...data];\r\n    console.log(data1)\r\n    $(\".price\").addEventListener(\"click\", e => {\r\n        priceType = priceType + 1 > 2 ? 0 : priceType + 1;\r\n        // console.log(priceType)\r\n        let btn = e.target.firstElementChild;\r\n        // console.log(data)\r\n        if(priceType === 1){\r\n            btn.classList.add(\"icon-jiageshengxu\");  //升序\r\n            btn.classList.remove(\"icon-jiagepaixu1\");\r\n            let datas = data1.sort( (a, b) => {\r\n                return a.price - b.price;\r\n            })\r\n            renderDataOne(datas);\r\n            renderDataTwo(datas)\r\n        }\r\n        if(priceType === 2){\r\n            btn.classList.add(\"icon-jiagejiangxu\");  //降序\r\n            btn.classList.remove(\"icon-jiageshengxu\");\r\n            let datas = data1.sort( (a, b) => {\r\n                return b.price - a.price;\r\n            })\r\n            renderDataOne(datas);\r\n            renderDataTwo(datas)\r\n        }\r\n        if(priceType === 0){\r\n            btn.classList.add(\"icon-jiagepaixu1\");  //默认\r\n            btn.classList.remove(\"icon-jiagejiangxu\");\r\n            renderDataOne(data2);\r\n            renderDataTwo(data2);\r\n        }\r\n    })\r\n}\r\n\r\n\r\n\r\n\r\nfunction renderDataOne(data){\r\n    $(\".items\").innerHTML = data.map(obj => {\r\n        return `\r\n            <div class=\"itemOne\" dataId=${obj.item_id} dataItem=item>\r\n                <p class=\"img\"><img src=\"${obj.img}\" alt=\"\"></p>\r\n                <p>${obj.title}</p>\r\n                <div>\r\n                    <span>￥${obj.price}</span>\r\n                    <span>月销${obj.sold}笔</span>\r\n                </div>\r\n            </div>\r\n        `\r\n    }).join(\"\")\r\n}\r\n\r\nfunction renderDataTwo(data){\r\n    $(\".itemss\").innerHTML = data.map(obj => {\r\n        return `\r\n            <div class=\"itemTwo\" dataId=${obj.item_id} dataItem=item>\r\n                <p><img src=\"${obj.img}\" alt=\"\"></p>\r\n                <div class=\"des\">\r\n                    <p>${obj.title}</p>\r\n                    <p>月销${obj.sold}笔</p>\r\n                    <p>￥${obj.price}</p>\r\n                </div>\r\n            </div>\r\n        `\r\n    }).join(\"\")\r\n}\r\n\r\n$(\".search\").addEventListener(\"click\", () => {\r\n    location.href = \"./search.html\";\r\n})\r\n\r\n\r\nfunction $(el){\r\n    return document.querySelector(el);\r\n}\r\n\r\nfunction $$(el){\r\n    return [...document.querySelectorAll(el)];\r\n}\r\n\r\n"],"names":["priceType","getData","resolve","reject","xhr","data","init","res","renderDataOne","renderDataTwo","clickData","sort","$","e","id","res1","axios","res2","res3","obj","data1","data2","btn","datas","a","b","el"],"mappings":"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"}